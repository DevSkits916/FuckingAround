import type { SocialPlatform } from '../types';

const ICON_VIEWBOX = '0 0 24 24';

const ICON_PATHS: Record<SocialPlatform, string> = {
  facebook: 'M13 20h-3v-7H8v-3h2V8.3C10 5.8 11.5 4 14.4 4c1.2 0 2.3.09 2.6.13v3h-1.8c-1.4 0-1.6.53-1.6 1.5V10h3.1l-.4 3H13v7z',
  x: 'M4 5h3.2l4.3 5.2L15.5 5H20l-6 7.1L20 19h-3.2l-4.3-5.3L8.5 19H4l6-7.1L4 5z',
  reddit:
    'M14.7 10.3c-.5 0-.9.4-.9.9s.4.9.9.9.9-.4.9-.9-.4-.9-.9-.9zm-5.4 0c-.5 0-.9.4-.9.9s.4.9.9.9.9-.4.9-.9-.4-.9-.9-.9zm5.5 4.5c-.7.7-1.9 1.1-2.8 1.1-.9 0-2.2-.4-2.8-1.1-.2-.2-.2-.5 0-.6.2-.2.5-.2.6 0 .5.5 1.5.9 2.2.9.7 0 1.7-.3 2.2-.9.2-.2.5-.2.6 0 .3.2.3.5 0 .6zM22 12c0 2.1-1.7 3.8-3.8 3.8-.8 0-1.5-.2-2.1-.6-.8.6-1.9 1.1-3.1 1.2l.6 2.8 2.5-.5c0-.6.5-1.1 1.1-1.1.6 0 1.1.5 1.1 1.1s-.5 1.1-1.1 1.1c-.4 0-.8-.3-.9-.7l-2.9.6c-.3.1-.6-.1-.7-.4l-.7-3.3c-1.3 0-2.5-.5-3.3-1.2-.6.4-1.3.6-2.1.6C3.7 15.8 2 14.1 2 12s1.7-3.8 3.8-3.8c1.1 0 2.1.4 2.8 1 .9-.7 2.1-1.1 3.4-1.1s2.5.4 3.4 1.1c.7-.7 1.7-1 2.8-1C20.3 8.2 22 9.9 22 12z',
  instagram:
    'M12 7.3c-2.6 0-4.7 2.1-4.7 4.7s2.1 4.7 4.7 4.7 4.7-2.1 4.7-4.7-2.1-4.7-4.7-4.7zm0 7.6a2.9 2.9 0 110-5.8 2.9 2.9 0 010 5.8zM17.7 6c0-.7-.6-1.3-1.3-1.3h-8.8C6.9 4.7 6.3 5.3 6.3 6v8.8c0 .7.6 1.3 1.3 1.3h8.8c.7 0 1.3-.6 1.3-1.3V6zm1.7 0v8.8c0 1.6-1.3 3-3 3H7.7c-1.6 0-3-1.3-3-3V6c0-1.6 1.3-3 3-3h8.8c1.6 0 3 1.3 3 3z',
  tiktok:
    'M16.7 4.2c1 .9 2.1 1.4 3.3 1.5v3.1c-1.2-.1-2.4-.5-3.3-1.2v5.9c0 3.4-2.8 6.1-6.1 6.1S4.5 16.9 4.5 13.5s2.8-6.1 6.1-6.1c.3 0 .6 0 .9.1v3.4c-.3-.1-.6-.2-.9-.2-1.4 0-2.6 1.1-2.6 2.6s1.1 2.6 2.6 2.6c1.4 0 2.6-1.1 2.6-2.6V2h3.5v2.2z',
  github:
    'M12 2a10 10 0 00-3.2 19.5c.5.1.7-.2.7-.5v-1.7c-2.9.6-3.6-1.4-3.6-1.4-.4-1-1-1.3-1-1.3-.8-.6.1-.6.1-.6.9.1 1.4 1 1.4 1 .8 1.4 2.2 1 2.7.8.1-.6.3-1 .6-1.2-2.3-.3-4.6-1.1-4.6-5a3.9 3.9 0 011-2.7c-.1-.3-.4-1.4.1-2.9 0 0 .9-.3 3 .9a10.3 10.3 0 015.4 0c2.1-1.2 3-.9 3-.9.5 1.5.2 2.6.1 2.9a3.9 3.9 0 011 2.7c0 3.9-2.4 4.7-4.6 5 .4.3.7.9.7 1.8v2.6c0 .3.2.7.7.5A10 10 0 0012 2z',
  linkedin:
    'M6.9 9H4V20h2.9V9zM5.5 4c-.9 0-1.5.7-1.5 1.5S4.6 7 5.5 7 7 6.3 7 5.5 6.4 4 5.5 4zM20 20h-2.9v-5.5c0-1.3 0-3-1.8-3s-2 1.4-2 2.9V20H10V9h2.7v1.5h.1c.4-.8 1.4-1.7 3-1.7 3.2 0 3.8 2.1 3.8 4.9V20z',
  paypal:
    'M17.2 5.2c-.7-1-1.9-1.5-3.7-1.5H7.6L5 19h3.6l.7-4.3h1.9c3.4 0 6-1.4 6.7-5 .2-1.3 0-2.5-.7-3.5zm-2.2 3.3c-.3 1.9-1.7 2.8-3.5 2.8H9.3l1-6h2.2c1.2 0 2 .2 2.4.7.4.5.5 1.2.3 2z',
  venmo:
    'M20 6.1c-.5 4.9-4.2 11.4-6.8 14.6h-3.7L7.2 8.6c.7-.8 1.7-1.4 2.9-1.4.9 0 1.5.3 1.9.9-.4 2.4-1.1 4.7-2 6.9 1.2-1.8 3-5.3 3.5-7.5h3.5z',
  cashapp:
    'M18.3 4H7.7A3.7 3.7 0 004 7.7v8.6A3.7 3.7 0 007.7 20h8.6A3.7 3.7 0 0020 16.3V7.7A3.7 3.7 0 0018.3 4zm-3.3 10.9h-1.1c-.1 1-.8 1.6-2 1.6-1.1 0-2.1-.5-2.1-1.7 0-1.1.7-1.7 2-1.9l1-.2c.4-.1.6-.2.6-.5 0-.4-.4-.5-.9-.5-.5 0-.9.2-1 .8H10c.1-1.1.8-1.7 2-1.8v-.7h1.2v.7c1.1.2 1.7.9 1.7 1.8 0 1.2-.7 1.7-2 1.9l-1 .2c-.3.1-.6.2-.6.5 0 .3.3.5.8.5.5 0 1-.2 1.1-.8h1.2c-.2 1.1-.9 1.7-2.1 1.8v.7h-1.2v-.7c-1.2-.2-1.9-1-1.9-2.1 0-1.1.6-1.7 2-1.9l1-.2c.3-.1.6-.2.6-.5 0-.4-.4-.5-.9-.5-.5 0-.9.3-1 .9H11c.1-1 1-1.7 2-1.8v-.7h1.2v.7c1.2.1 1.9.8 1.9 1.8 0 1.2-.7 1.7-2.1 1.9l-1 .2c-.3.1-.5.2-.5.5 0 .4.4.5.9.5.6 0 1-.2 1.1-.8h1.1c-.1 1.1-.8 1.7-2 1.8v.7h-1.2v-.7c-1.1-.2-1.9-1-1.9-2.1 0-1.1.6-1.7 2-1.9l1-.2c.3-.1.6-.2.6-.5 0-.4-.4-.5-.9-.5-.5 0-.9.2-1 .8h-1.1c.2-1 1-1.6 2.1-1.7v-.7h1.2v.7c1.2.2 1.8.9 1.8 1.8 0 1.1-.6 1.6-1.9 1.8l-1 .2c-.3 0-.5.2-.5.5 0 .4.4.5.9.5.5 0 1-.2 1.1-.8h1.1c-.1 1.1-.8 1.6-2 1.8v.7z',
  chime:
    'M18.1 7.9c-.7 0-1.3.4-1.6 1-.4-.6-1.1-1-2-1-1.7 0-3 1.3-3 3.1 0 1.8 1.3 3.1 3 3.1.9 0 1.6-.4 2-1 .3.6.9 1 1.6 1 1.2 0 2.1-1 2.1-2.3 0-1.4-.9-2.3-2.1-2.3zm-5.9 3c0-1.8-1.2-3-3.1-3-1 0-1.8.4-2.3 1.1V8.1H4v7.9h2.8v-3.5c0-1 .6-1.6 1.4-1.6.9 0 1.5.6 1.5 1.6v3.5h2.5V10.9z',
  gofundme:
    'M20.5 8.2c-1.6 0-3 .7-3.9 1.9-.6-2.2-2.6-3.8-5-3.8-2.3 0-4.3 1.6-4.9 3.7-.9-1.1-2.3-1.8-3.8-1.8H2v3.4h.9c1.4 0 2.5 1.1 2.5 2.5V20h3.4v-5.8c0-1.4 1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5V20h3.4v-4.4c0-1.4 1.1-2.5 2.5-2.5H22V8.2h-1.5z',
};

const createDataUri = (path: string, color: string) => {
  const svg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="${ICON_VIEWBOX}" fill="${color}"><path d="${path}"/></svg>`;
  const encoded = encodeURIComponent(svg)
    .replace(/'/g, '%27')
    .replace(/\(/g, '%28')
    .replace(/\)/g, '%29');
  return `data:image/svg+xml,${encoded}`;
};

interface SocialIconProps {
  platform: SocialPlatform;
  color: string;
}

export function SocialIcon({ platform, color }: SocialIconProps) {
  const path = ICON_PATHS[platform];
  if (!path) return null;
  const uri = createDataUri(path, color);
  return <img src={uri} alt={platform} width={18} height={18} style={{ display: 'block' }} />;
}

export function getIconDataUri(platform: SocialPlatform, color: string) {
  return createDataUri(ICON_PATHS[platform], color);
}
